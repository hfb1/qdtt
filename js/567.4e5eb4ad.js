"use strict";(self["webpackChunkhtqdtt"]=self["webpackChunkhtqdtt"]||[]).push([[567],{3162:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"前端头条-登录"}}),t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"mobile",label:"手机号",required:"",placeholder:"请输入11位手机号",rules:[{required:!0,message:"请填写正确的手机号",pattern:/^1[3-9]\d{9}$/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),t("van-field",{attrs:{type:"password",name:"code",label:"密码",required:"",placeholder:"请输入6位数的密码",rules:[{required:!0,message:"请填写正确的密码",pattern:/^\d{6}$/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",disabled:e.isLoading,loading:e.isLoading,"loading-text":"正在登录ing..."}},[e._v(" 登录 ")])],1)],1)],1)},o=[],n=a(4623),r=a(586),i=a(3505),l=a(7247),u={data(){return{user:{mobile:"13671898281",code:"246810"},isLoading:!1}},methods:{async onSubmit(e){this.isLoading=!0,console.log("submit",e);try{const{data:e}=await(0,r.UO)(this.user);console.log("登入成功：",e),(0,n.Z)({type:"success",message:"登录成功"}),(0,i.o4)(e.data.token),(0,l.po)("refresh_token",e.data.refresh_token),this.$router.replace({path:this.$route.query.path||"/layout/home"})}catch(t){(0,n.Z)({type:"danger",message:"账号或密码错误"})}this.isLoading=!1}}},d=u,c=a(1001),m=(0,c.Z)(d,s,o,!1,null,"ecc9b2f2",null),p=m.exports},7247:function(e,t,a){a.d(t,{cF:function(){return o},po:function(){return s}});const s=(e,t)=>{localStorage.setItem(e,t)},o=e=>localStorage.getItem(e)}}]);
//# sourceMappingURL=567.4e5eb4ad.js.map